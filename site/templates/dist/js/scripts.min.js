function requestFullscreen(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function startFullscreen(e){e.enterFullScreen?e.enterFullScreen():e.mozEnterFullScreen?e.mozEnterFullScreen():e.webkitEnterFullScreen?e.webkitEnterFullScreen():e.msEnterFullScreen&&e.msEnterFullScreen()}function exitFullscreen(e){e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}function loadImages(){$("img.lazy").each(function(){var e=$(this);e.waypoint(function(){e.loadImage()},{offset:"150%"})}),$("div.lazy").each(function(){var e=$(this);e.waypoint(function(){e.loadBgImage()},{offset:"150%"})})}function elementsResize(){var e,n=$(window).height();supportsTouch&&$(".slider__container.v__1, .slider__container.v__1 .slider, .slider__container.v__1 .slider .each__slide").css("height",n-200),supportsTouch&&$(window).width()>=1024&&(e=n,$(".slider__container.v__1, .slider__container.v__1 .slider, .slider__container.v__1 .slider .each__slide").css("height",e-200),console.log("iOS tablet landscape")),supportsTouch&&$(window).width()>=768&&$(window).width()<=1023&&(e=n,$(".slider__container.v__1, .slider__container.v__1 .slider, .slider__container.v__1 .slider .each__slide").css("height",e-200),console.log("iOS tablet portrait")),supportsTouch&&$(window).width()<768&&(e=n,$(".slider__container.v__1, .slider__container.v__1 .slider, .slider__container.v__1 .slider .each__slide").css("height",e-160),console.log("iOS phone"))}function menus(){$("ul.menu li").removeClass("active"),$("ul.menu li").each(function(){var e=$(this).attr("class");if(void 0!==e)for(var n=e.split(/\s+/),i=0,t=n.length;i<t;i++)$("body").hasClass(n[i])&&$(this).addClass("active")})}function openNav(){$("body").addClass("nav-is--open"),$("body.nav-is--open nav.main").one(transitionEnd,function(e){$("body").addClass("nav-is--fully-open"),$("nav.main").off(transitionEnd)});var e=$("nav.main")[0];bodyScrollLock.disableBodyScroll(e)}function closeNav(){$("body.nav-is--fully-open").removeClass("nav-is--fully-open"),$("body.nav-is--open nav.main > .inner").one(transitionEnd,function(e){console.log("dfsfsfsdf"),$("body.nav-is--open").removeClass("nav-is--open"),$("nav.main > .inner").off(transitionEnd)}),bodyScrollLock.clearAllBodyScrollLocks()}function imgToSVG(){$("img.svg").each(function(){var e=$(this),n=e.attr("class"),i=e.attr("src");$.get(i,function(i){var t=$(i).find("svg");"undefined"!=typeof n&&(t=t.attr("class",n+" replaced-svg")),t=t.removeAttr("xmlns:a"),e.replaceWith(t)},"xml")})}function internalLinks(){$("a[rel=internal]").each(function(){$(this).attr("data-pjax","")})}function cookies(){Cookies.get("ls_cookies_accept")?($("body").removeClass("cookies-is--active").addClass("cookies--accepted"),$(".data-notification").remove()):($("body").removeClass("cookies--accepted").addClass("cookies-is--active"),$(".data-notification").attr("style","display: -webkit-flex; display: -ms-flexbox; display: flex;")),Cookies.get("__ls_mailing")?$(".mailing__list--popup").remove():$("body").addClass("mailing-list-is--active")}function animationStick(){$("section.home__content .home-ie__layout .image").stick_in_parent({offset_top:120,spacer:!1,parent:"section.home__content .home-ie__layout"})}function sliders(){if($(".slider__container.v__1").length>0){var e={lazyLoad:2,wrapAround:!0,prevNextButtons:!1,setGallerySize:!1,pageDots:!1,watchCSS:!1,draggable:!0,selectedAttraction:.2,friction:.8};$(".slider").flickity(e).focus(),$(".slider__container.v__1").each(function(e,n){function i(){var e=a.selectedIndex+1;$(".product__gallery").find(".slider__count").text(e+"/"+a.slides.length)}var t=$(n),o=t.find(".slider"),a=o.data("flickity");a.selectedIndex;i(),o.on("select.flickity",i),t.find(".slider__navigation.prev").on("click",function(e){e.preventDefault(),o.flickity("previous")}),t.find(".slider__navigation.next").on("click",function(e){e.preventDefault(),o.flickity("next")})})}$(".slider__container.v__fade").length>0&&$(".slider__container.v__fade .slider").not(".slick-initialized").each(function(){var e=$(this);e.slick({slide:".slide",infinite:!0,adaptiveHeight:!1,dots:!1,fade:!0,autoplay:!0,draggable:!1,pauseOnHover:!1,waitForAnimate:!1,arrows:!1,zIndex:20,speed:2500,autoplaySpeed:5e3})}),$(".slider__container.v__fade2").length>0&&$(".slider__container.v__fade2 .slider").not(".slick-initialized").each(function(){var e=$(this);e.slick({slide:".slide",infinite:!0,lazyLoad:"progressive",adaptiveHeight:!0,dots:!0,fade:!0,autoplay:!0,draggable:!1,pauseOnHover:!1,waitForAnimate:!1,arrows:!1,zIndex:20,speed:2500,autoplaySpeed:5e3}),e.on("click",function(n){e.slick("slickNext")})})}function openGallery(e){var n=$(".product__gallery .slider"),i=$(".product__gallery .flickity-slider"),t=e.attr("data-gallery");i.prepend(t),n.flickity("reloadCells"),n.flickity("select",0,!1,!0),$("body").addClass("gallery-is--open"),bodyScrollLock.disableBodyScroll()}function closeGallery(){var e=($(".product__gallery .slider"),$(".product__gallery .flickity-slider"));$("body.gallery-is--open").removeClass("gallery-is--open"),$(".product__gallery").one(transitionEnd,function(n){e.empty(),$(".product__gallery").off(transitionEnd)}),bodyScrollLock.clearAllBodyScrollLocks()}function video(){$(".inline__video").length&&$(".inline__video").each(function(){var e=$(this),n=e.get(0),i=e.next(".video__controls"),t=i.find("a.play")[0],o=i.find("a.mute")[0];n.oncanplay=function(){e.addClass("can--play"),supportsTouch||1!=n.muted||(i.addClass("video-is--playing"),n.play(),$(t).one(transitionEnd,function(){$(t).find("span").text("Pause"),$(t).off(transitionEnd)}))},i.on("mousemove",function(){0==n.paused?i.addClass("user-is--active"):i.removeClass("user-is--active")}),i.on("mouseleave",function(){i.removeClass("user-is--active")}),t.addEventListener("click",function(i){i.preventDefault(),supportsTouch&&isIOS?(startFullscreen(n),n.play()):n.paused?(e.next(".video__controls").addClass("video-is--playing"),$(t).find("span").text("Pause"),n.play()):(e.next(".video__controls").removeClass("video-is--playing"),$(t).find("span").text("Play"),n.pause())}),o&&o.addEventListener("click",function(e){e.preventDefault(),1==n.muted?($(o).find("span").text("Mute"),n.muted=!1):($(o).find("span").text("Unmute"),n.muted=!0)})})}function loadNewContent(){event.preventDefault();var e=$(this),n=e.attr("href");$target.addClass("is--loading"),$("body").addClass("context-is--loading"),$target.one(transitionEnd,function(){$.pjax({url:n,fragment:"body",container:$target}),$target.off(transitionEnd)})}var siteURL=document.location.origin,rootURL=config.urls.root,templatesURL=config.urls.templates,animationEnd="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",transitionEnd="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",supportsTouch="ontouchstart"in window||navigator.maxTouchPoints,isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent);$.fn.loadImage=function(){var e;return this.each(function(){e=$(window).width()>768?$(this).data("original"):$(this).data("medium");var n=$(this);$("<img />").attr("src",e).imagesLoaded(function(){n.attr("src",e).addClass("loaded").removeClass("loading"),$(window).trigger("resize")})})},$.fn.loadBgImage=function(){return this.each(function(){var e;e=$(window).width()>768?$(this).data("original"):$(this).data("medium");var n=$(this);$("<div />").css("background-image","url("+e+")").imagesLoaded(function(){n.css("background-image","url("+e+")").addClass("loaded").removeClass("loading"),$(window).trigger("resize")})})},loadImages(),$(document).on("ready",function(){elementsResize(),$(window).on("resize",$.debounce(500,elementsResize))}),$(document).on("scroll",function(){$(window).scrollTop()>=1?$("body").addClass("has--scrolled"):$("body").removeClass("has--scrolled")}),menus(),$(document).on("click","body:not(.nav-is--open) a.nav__trigger",function(e){e.preventDefault(),openNav()}),$(document).on("click","body.nav-is--open a.nav__trigger",function(e){e.preventDefault(),closeNav()}),imgToSVG(),internalLinks(),$(document).on("click",".data-notification a.accept",function(e){e.preventDefault(),Cookies.set("ls_cookies_accept","1",{expires:7}),$("body").removeClass("cookies-is--active").addClass("cookies--accepted"),$(".data-notification").addClass("is--hidden")}),$(document).on("click",".mailing__list--popup a.close",function(e){e.preventDefault(),Cookies.set("__ls_mailing","1",{expires:7}),$("body").removeClass("mailing-list-is--active"),$(".mailing__list--popup").on(transitionEnd,function(){$(".mailing__list--popup").remove(),$(".mailing__list--popup").off(transitionEnd)})}),$(document).on("click","form.mailing__list input[type=submit]",function(e){Cookies.set("__ls_mailing","1",{expires:7})}),cookies(),animationStick(),$("section.home__landing a.read__more").smoothScroll(),sliders(),$(document).on("click","a.zoom.is--gallery",function(e,n){e.preventDefault(),n=$(this),openGallery(n)}),$(document).on("click","body.gallery-is--open .product__gallery a.close",function(e){e.preventDefault(),closeGallery()}),video(),$(document).on("click","body.projects-single .content__layout .item h2",function(e){e.preventDefault();var n=$(this),i=n.parents(".item"),t=i.find(".content");i.toggleClass("is--active"),t.stop(!0,!0).slideToggle(300),$(".slider__container.v__fade2 .slider").slick("setPosition")}),$.pjax.defaults.scrollTo=!1,$.pjax.defaults.timeout=2e5,$.pjax.defaults.maxCacheLength=0;var $target=$("section.context");$(document).on("click","a[data-pjax]",loadNewContent),$(document).on("pjax:end",function(){var e=$("meta[name=body-class]").attr("content");void 0!==e&&(document.body.className=e),loadImages(),imgToSVG(),internalLinks(),menus(),sliders(),cookies(),$("body").scrollTop(0),$target.removeClass("is--loading"),$("body").removeClass("context-is--loading")});
